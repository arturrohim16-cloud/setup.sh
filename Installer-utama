#!/bin/bash
# Installer AJI MASTER SYSTEM V16
# -----------------------------------------

# 1. Update & Install Dependencies
apt update -y
apt upgrade -y
apt install -y software-properties-common curl wget sudo socat cron bash-completion ntpdate
apt install -y net-tools vnstat jq bsdmainutils python3 python3-pip

# 2. Buat Direktori Kerja
mkdir -p /etc/xray
mkdir -p /etc/aji
mkdir -p /var/log/xray
touch /etc/aji/users.db

# 3. Setup Timezone (Jakarta)
timedatectl set-timezone Asia/Jakarta

# 4. Install Xray Core Otomatis
echo -e "Installing Xray Core..."
bash -c "$(curl -L https://github.com/XTLS/Xray-install/raw/main/install-release.sh)" @ install

# 5. Pasang Konfigurasi Default (Kosong tapi Struktur Benar)
cat > /etc/xray/config.json <<EOF
{
    "log": { "access": "/var/log/xray/access.log", "error": "/var/log/xray/error.log", "loglevel": "warning" },
    "inbounds": [],
    "outbounds": [{ "protocol": "freedom", "settings": {} }]
}
EOF

# 6. Ambil File Menu Kamu dari GitHub
echo -e "Downloading Menu Master..."
wget -q -O /usr/bin/menu "https://raw.githubusercontent.com/arturrohim16-cloud/Ajimaster-scriot/refs/heads/main/Scriptku"
chmod +x /usr/bin/menu

# 7. Setup Badvpn (Untuk Game/UDP)
wget -O /usr/bin/badvpn-udpgw "https://raw.githubusercontent.com/arturrohim16-cloud/Ajimaster-scriot/refs/heads/main/badvpn-udpgw64"
chmod +x /usr/bin/badvpn-udpgw

# 8. Selesai
clear
echo -e "═══════════════════════════════════════════════════"
echo -e "       INSTALLASI SELESAI - AJI MASTER V16"
echo -e "═══════════════════════════════════════════════════"
echo -e " Ketik 'menu' untuk membuka dashboard"
echo -e "═══════════════════════════════════════════════════"

